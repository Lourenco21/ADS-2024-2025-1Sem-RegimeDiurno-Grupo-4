<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'horariomanagerapp/style.css' %}">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabela CSV</title>
    <link href="https://unpkg.com/tabulator-tables@5.4.0/dist/css/tabulator.min.css" rel="stylesheet">
    <script src="https://unpkg.com/tabulator-tables@5.4.0/dist/js/tabulator.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>

</head>
<body>
<h1>Select the CSV Files</h1>

<div class="button-container">
    <label class="custom-file-input" for="scheduleFileInput">Choose the schedule</label>
    <input type="file" id="scheduleFileInput" accept=".csv"/>


    <label class="custom-file-input" for="characteristicsFileInput">Choose the room characteristics</label>
    <input type="file" id="characteristicsFileInput" accept=".csv"/>

</div>


<h3 id="filesSelectedHeading" style="display: none; align-items: center;;">Files Selected</h3>
<p id="scheduleFileName"></p>
<p id="characteristicsFileName"></p>


<div style="display: flex; justify-content: space-between; align-items: flex-start; gap: 20px; width: 90%; margin: auto;">
    <!-- Schedule Table Section -->
    <div id="schedule-container" style="flex: 3; min-width: 60%;">
        <h2>Schedule Table</h2>
        <div id="schedule-table"></div>
        <br>

        <br>
    </div>

    <!-- Filters Section -->
    <div id="filters-container" style="flex: 1; min-width: 250px;">
        <h2 style="text-align: center;">Filters</h2>
        <div style="display: flex; flex-direction: column; gap: 20px;">

            <!-- Overcrowded Filter -->
            <div style="text-align: center;">
                <button id="overcrowdedFilterButton" class="custom-file-input">Filtrar aulas em sobrelotação</button>
                <div id="overcrowdedMetrics" style="margin-top: 10px; font-weight: bold; display:none;"></div>
            </div>

            <!-- Overlap Filter -->
            <div style="text-align: center;">
                <button id="overlapFilterButton" class="custom-file-input">Filtrar sobreposição de aulas</button>
                <div id="overlapMetrics" style="margin-top: 10px; font-weight: bold; display:none;"></div>
            </div>

            <!-- Class Without Room Filter -->
            <div style="text-align: center;">
                <button id="classWithoutRoomButton" class="custom-file-input">Filtrar aulas sem sala</button>
                <div id="withoutRoomMetrics" style="margin-top: 10px; font-weight: bold; display:none;"></div>
            </div>

            <!-- Time Regulations Filter -->
            <div style="text-align: center;">
                <button id="timeRegulationsButton" class="custom-file-input">Filtrar aulas contra regulação dos horários</button>
                <div id="timeRegulationsMetrics" style="margin-top: 10px; font-weight: bold; display:none;"></div>
            </div>

            <!-- Matching Characteristics Filter -->
            <div style="text-align: center;">
                <button id="matchingCharacteristicsButton" class="custom-file-input">Filtrar aulas sem características certas</button>
                <div id="characteristicsMetrics" style="margin-top: 10px; font-weight: bold; display:none;"></div>
            </div>
            <div style="text-align: center;">
                <button id="resetFilterButton" class="custom-file-input">Apagar filtros</button>
            </div>
        </div>
    </div>
</div>



<div style="display: flex; justify-content: space-around; align-items: flex-start; gap: 20px; margin-top: 20px;">
    <button id="saveChangesButton" class="custom-file-input">Guardar alterações num ficheiro novo</button>
    <button id="toggleButton" class="custom-file-input">Mostrar tabela de características</button>
    <button id="updateScheduleCharacteristicsButton" class="custom-file-input">Atualizar Caracteristicas Horário</button>
</div>
<br>


<h2 id="characteristics-h2" style="display: none">Characteristics table</h2>
<div id="characteristics-table">
</div>

<div id="metricBalancePopup" class="popup-metrics">
    <div id="metricBalance" style="font-weight: bold;"></div>
</div>

<br><br><br>

<script src="{% static 'script.js' %}"></script>

</body>
</html>
